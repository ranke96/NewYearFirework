<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Firefly Effect</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: black;
    }
    .firefly {
      position: absolute;
      pointer-events: none;
      transition: opacity 1s ease-in-out, transform 2s ease-in-out, left 5s linear, top 5s linear;
    }
  </style>
</head>
<body>
  <script>
    function getRandom(min, max) {
      return Math.random() * (max - min) + min;
    }

    function createFirefly() {
      const firefly = document.createElement('img');
      firefly.className = 'firefly';
      firefly.src = `fire${Math.floor(getRandom(0, 6))}.png`;

      const x = getRandom(-200, window.innerWidth + 200);
      const y = getRandom(-200, window.innerHeight + 200);
      firefly.style.left = `${x}px`;
      firefly.style.top = `${y}px`;

      firefly.style.opacity = getRandom(0.1, 0.2);

      document.body.appendChild(firefly);

      setTimeout(() => {
        moveFirefly(firefly);
      }, 100);
    }

    function moveFirefly(firefly) {
      const frequencyX = getRandom(0.002, 0.005); // 控制水平波浪的頻率
      const amplitudeX = getRandom(50, 100); // 控制水平波浪的振幅
      const frequencyY = getRandom(0.002, 0.005); // 控制垂直波浪的頻率
      const amplitudeY = getRandom(50, 100); // 控制垂直波浪的振幅

      const x = parseInt(firefly.style.left);
      const y = parseInt(firefly.style.top);

      const newX = x + Math.sin(y * frequencyX) * amplitudeX; // X 軸以正弦函數控制水平移動
      const newY = y + Math.sin(x * frequencyY) * amplitudeY; // Y 軸以正弦函數控制垂直移動

      firefly.style.opacity = getRandom(0.1, 0.5); // 更新透明度

      firefly.style.left = `${newX}px`;
      firefly.style.top = `${newY}px`;

      const scale = getRandom(0.5, 0.9);
      firefly.style.transform = `scale(${scale})`;

      setTimeout(() => {
        requestAnimationFrame(() => moveFirefly(firefly));
      }, 2000); // 控制移動的速度

    }

    const numFireflies = 30;
    for (let i = 0; i < numFireflies; i++) {
      createFirefly();
    }
  </script>
</body>
</html>
